<!DOCTYPE html>
<html lang="ru" xmlns:th="https://www.thymeleaf.org">
<head th:replace="common/head :: head('Система тестирования')"></head>

<body>
<nav th:replace="common/nav :: copy"></nav>

<div class="container mt-5">
    <div th:if="${param.proc_end_time}" class="alert alert-success" role="alert">
        Время вышло. Прохождение тестирования завершено. Просмотр результатов может быть доступен в разделе "Архив".
    </div>
    <div th:if="${param.proc_end}" class="alert alert-success" role="alert">
        Прохождение тестирования завершено. Просмотр результатов может быть доступен в разделе "Архив".
    </div>
    <h5>Актуальные материалы</h5>
    <br>
    <table class="table table-striped">
        <thead>
        <tr>
            <th scope="col">Название материала</th>
            <th scope="col">Ограничение времени (мин.)</th>
            <th scope="col">Актуально до</th>
            <th scope="col">Количество попыток</th>
            <th scope="col">&nbsp;</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="testAcces : ${testAccess}">
            <td th:text="${testAcces.getTestExemp().getName()}">Название материала</td>
            <td th:text="${testAcces.getTimeLimit()}">Ограничение времени (мин.)</td>
            <td th:text="${testAcces.getDateEnd()}">Актуально до</td>
            <td th:text="${testAcces.getCountAccess() - testAcces.getCountUse()}">Количество попыток</td>
            <td>
                <a th:href="@{/content/attempt/open/{id}(id=${testAcces.getId()})}">
                    Открыть
                </a>
            </td>
        </tr>
        </tbody>
    </table>
    <br>
    <h5>Архив</h5>
    <br>
    <table class="table table-striped">
        <thead>
        <tr>
            <th scope="col">Название материала</th>
            <th scope="col">Дата прохождения</th>
            <th scope="col">Результат</th>
            <th scope="col">&nbsp;</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="attempt : ${attempts}">
            <td th:text="${attempt.getTestAccess().getTestExemp().getName()}">Название материала</td>
            <td th:text="${attempt.getDateEnd()}">Дата прохождения</td>
            <td th:text="${attempt.getResult() + ' из ' + attempt.getTestAccess().getTestExemp().getMaxCount()}">Результат</td>
            <td>
                <a th:href="@{/content/attempt/open_result/{id}(id=${attempt.getId()})}">
                    Открыть
                </a>
            </td>
        </tr>
        </tbody>
    </table>
</div>
